[pytest]
# Configuración de pytest para el proyecto Queue Management System

# Directorio de pruebas
testpaths = tests

# Opciones de salida
addopts = -v --tb=short

# Filtros de warnings - Suprimir warnings conocidos
filterwarnings =
    # Ignorar warnings de Pydantic V2
    ignore::DeprecationWarning: pydantic
    ignore::UserWarning: pydantic

    # Ignorar warnings de SQLAlchemy 2.0
    ignore::sqlalchemy.exc.MovedIn20Warning

    # Ignorar warning de transacción ya desasociada
    ignore::sqlalchemy.exc.SAWarning:.*transaction already deassociated.*

     # Ignorar warnings de Pydantic sobre dict method
    ignore:.*The `dict` method is deprecated.*:DeprecationWarning

    # Ignorar warnings de SQLAlchemy sobre transacciones
    ignore:.*transaction already deassociated.*:sqlalchemy.exc.SAWarning

    # Ignorar warnings de SQLAlchemy 2.0
    ignore::sqlalchemy.exc.MovedIn20Warning

    # Ignorar warning específico de Redis async
    ignore::DeprecationWarning: app.core.redis

# Si quieres ignorar TODOS los warnings de deprecación (no recomendado para desarrollo)
# ignore::DeprecationWarning

# Si quieres convertir warnings en errores para forzar su corrección
# error::UserWarning

# Configuración de logging
log_cli = false
log_cli_level = INFO

# Marcadores personalizados (opcional)
markers =
    slow: marca las pruebas como lentas
    integration: pruebas de integración
    unit: pruebas unitarias